(()=>{function d(t,e,r){var r=2<arguments.length&&void 0!==r?r:5,n=new Set([1,t,e]);1<t&&(n.add(2),n.add(t-1));for(var o=Math.max(1,e-r),i=Math.max(o,Math.min(t,e+r)),a=o;a<=i;a++)n.add(a);return Array.from(n).sort(function(t,e){return t-e})}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){return(t=>{if(Array.isArray(t))return t})(t)||((t,e)=>{var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}})(t,e)||((t,e)=>{var r;if(t)return"string"==typeof t?n(t,e):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0})(t,e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function o(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function P(){P=function(){return a};var l,a={},t=Object.prototype,u=t.hasOwnProperty,s=Object.defineProperty||function(t,e,r){t[e]=r.value},e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(l){i=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype),n=new S(n||[]);return s(e,"_invoke",{value:(o=t,i=r,a=n,c=p,function(t,e){if(c===d)throw Error("Generator is already running");if(c===y){if("throw"===t)throw e;return{value:l,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r){r=function t(e,r){var n=r.method,o=e.iterator[n];if(o===l)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=l,t(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;n=f(o,e.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,v;o=n.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=l),r.delegate=null,v):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}(r,a);if(r){if(r===v)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=d;r=f(o,i,a);if("normal"===r.type){if(c=a.done?y:h,r.arg===v)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c=y,a.method="throw",a.arg=r.arg)}})}),e}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}a.wrap=c;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var e={},w=(i(e,n,function(){return this}),Object.getPrototypeOf),w=w&&w(w(j([]))),k=(w&&w!==t&&u.call(w,n)&&(e=w),b.prototype=m.prototype=Object.create(e));function x(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function L(a,c){var e;s(this,"_invoke",{value:function(r,n){function t(){return new c(function(t,e){!function e(t,r,n,o){var i,t=f(a[t],a,r);if("throw"!==t.type)return(r=(i=t.arg).value)&&"object"==_(r)&&u.call(r,"__await")?c.resolve(r.__await).then(function(t){e("next",t,n,o)},function(t){e("throw",t,n,o)}):c.resolve(r).then(function(t){i.value=t,n(i)},function(t){return e("throw",t,n,o)});o(t.arg)}(r,n,t,e)})}return e=e?e.then(t,t):t()}})}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var r,t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return r=-1,(t=function t(){for(;++r<e.length;)if(u.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=l,t.done=!0,t}).next=t}throw new TypeError(_(e)+" is not iterable")}return s(k,"constructor",{value:g.prototype=b,configurable:!0}),s(b,"constructor",{value:g,configurable:!0}),g.displayName=i(b,o,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,i(t,o,"GeneratorFunction")),t.prototype=Object.create(k),t},a.awrap=function(t){return{__await:t}},x(L.prototype),i(L.prototype,r,function(){return this}),a.AsyncIterator=L,a.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var i=new L(c(t,e,r,n),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(k),i(k,o,"Generator"),i(k,n,function(){return this}),i(k,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,r=Object(t),n=[];for(e in r)n.push(e);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=j,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function t(t,e){return i.type="throw",i.arg=r,n.next=t,e&&(n.method="next",n.arg=l),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&u.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=l),v}},a}function h(t,e,r){return(e=v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t,e,r,n,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return r(t)}c.done?e(l):Promise.resolve(l).then(n,o)}function y(c){return function(){var t=this,a=arguments;return new Promise(function(e,r){var n=c.apply(t,a);function o(t){l(n,e,r,o,i,"next",t)}function i(t){l(n,e,r,o,i,"throw",t)}o(void 0)})}}function v(t){t=(t=>{if("object"!=_(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return String(t);if("object"!=_(e=e.call(t,"string")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(t);return"symbol"==_(t)?t:t+""}var m,g,t=(()=>{for(var e,r,t,n,o,i=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._albums={},"undefined"==typeof $&&($=e)},a=[{key:"init",value:function(){this._isInitiated||(this._isInitiated=!0)}},{key:"getPhotos",value:(o=y(P().mark(function t(){var e,r=arguments;return P().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<r.length&&void 0!==r[0]?r[0]:{},t.next=3,axios.get("/api/cp-flickr-gallery/photos",h(h({},Craft.csrfTokenName,Craft.csrfTokenValue),"params",e));case 3:return e=t.sent,t.abrupt("return",e.data);case 5:case"end":return t.stop()}},t)})),function(){return o.apply(this,arguments)})},{key:"getAlbum",value:(n=y(P().mark(function t(e){var r,n,o=arguments;return P().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=1<o.length&&void 0!==o[1]?o[1]:{},r="".concat(e,":").concat(JSON.stringify(n)),this._albums[r]){t.next=7;break}return t.next=5,axios.get("/api/cp-flickr-gallery/albums/".concat(e),h(h({},Craft.csrfTokenName,Craft.csrfTokenValue),"params",n));case 5:n=t.sent,this._albums[r]=n.data;case 7:return t.abrupt("return",this._albums[r]);case 8:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"getAlbums",value:(t=y(P().mark(function t(){var e,r=arguments;return P().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<r.length&&void 0!==r[0]?r[0]:{},t.next=3,axios.get("/api/cp-flickr-gallery/albums",h(h({},Craft.csrfTokenName,Craft.csrfTokenValue),"params",e));case 3:return e=t.sent,t.abrupt("return",e.data);case 5:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)})},{key:"importAlbum",value:(r=y(P().mark(function t(e){var r,n,o,i,a=arguments;return P().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=1<a.length&&void 0!==a[1]?a[1]:null,o=2<a.length&&void 0!==a[2]?a[2]:null,i=3<a.length?a[3]:void 0,t.next=5,axios.post("/api/cp-flickr-gallery/albums/".concat(e,"/import"),p(h({},Craft.csrfTokenName,Craft.csrfTokenValue),i));case 5:null!=(i=t.sent)&&null!=(r=i.data)&&r.success?n&&n(i):o&&o(i);case 7:case"end":return t.stop()}},t)})),function(t){return r.apply(this,arguments)})},{key:"importPhotos",value:(e=y(P().mark(function t(e){var r,n,o,i,a,c=arguments;return P().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=1<c.length&&void 0!==c[1]?c[1]:null,r=2<c.length&&void 0!==c[2]?c[2]:null,n=3<c.length&&void 0!==c[3]?c[3]:null,o=4<c.length&&void 0!==c[4]?c[4]:{},t.next=6,axios.post("/api/cp-flickr-gallery/photos/import",p(h(h(h({},Craft.csrfTokenName,Craft.csrfTokenValue),"ids",e),"albumId",i),o));case 6:i=t.sent,null!=(o=i.data)&&o.success?(this._updateImportedIds(null!=(a=i.data.imported_flickr_photos)?a:[]),r&&r(i)):n&&n(i);case 8:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"_updateImportedIds",value:function(e){if(e)for(var t=0,r=Object.entries(this._albums);t<r.length;t++){var n=f(r[t],2);n[0],n[1].photo.forEach(function(t){t.id&&e.includes(t.id)&&(t.isImported=!0)})}}}],c=i.prototype,l=a,u=0;u<l.length;u++){var s=l[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(c,v(s.key),s)}return Object.defineProperty(i,"prototype",{writable:!1}),i})();function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(){T=function(){return a};var l,a={},t=Object.prototype,u=t.hasOwnProperty,s=Object.defineProperty||function(t,e,r){t[e]=r.value},e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(l){i=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o,i,a,c,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype),n=new S(n||[]);return s(e,"_invoke",{value:(o=t,i=r,a=n,c=p,function(t,e){if(c===d)throw Error("Generator is already running");if(c===y){if("throw"===t)throw e;return{value:l,done:!0}}for(a.method=t,a.arg=e;;){var r=a.delegate;if(r){r=function t(e,r){var n=r.method,o=e.iterator[n];if(o===l)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=l,t(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;n=f(o,e.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,v;o=n.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=l),r.delegate=null,v):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}(r,a);if(r){if(r===v)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===p)throw c=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=d;r=f(o,i,a);if("normal"===r.type){if(c=a.done?y:h,r.arg===v)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(c=y,a.method="throw",a.arg=r.arg)}})}),e}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}a.wrap=c;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var e={},w=(i(e,n,function(){return this}),Object.getPrototypeOf),w=w&&w(w(j([]))),k=(w&&w!==t&&u.call(w,n)&&(e=w),b.prototype=m.prototype=Object.create(e));function x(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function L(a,c){var e;s(this,"_invoke",{value:function(r,n){function t(){return new c(function(t,e){!function e(t,r,n,o){var i,t=f(a[t],a,r);if("throw"!==t.type)return(r=(i=t.arg).value)&&"object"==I(r)&&u.call(r,"__await")?c.resolve(r.__await).then(function(t){e("next",t,n,o)},function(t){e("throw",t,n,o)}):c.resolve(r).then(function(t){i.value=t,n(i)},function(t){return e("throw",t,n,o)});o(t.arg)}(r,n,t,e)})}return e=e?e.then(t,t):t()}})}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var r,t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return r=-1,(t=function t(){for(;++r<e.length;)if(u.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=l,t.done=!0,t}).next=t}throw new TypeError(I(e)+" is not iterable")}return s(k,"constructor",{value:g.prototype=b,configurable:!0}),s(b,"constructor",{value:g,configurable:!0}),g.displayName=i(b,o,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,i(t,o,"GeneratorFunction")),t.prototype=Object.create(k),t},a.awrap=function(t){return{__await:t}},x(L.prototype),i(L.prototype,r,function(){return this}),a.AsyncIterator=L,a.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var i=new L(c(t,e,r,n),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(k),i(k,o,"Generator"),i(k,n,function(){return this}),i(k,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,r=Object(t),n=[];for(e in r)n.push(e);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=j,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function t(t,e){return i.type="throw",i.arg=r,n.next=t,e&&(n.method="next",n.arg=l),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),c=u.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&u.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,O(o)),n}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=l),v}},a}function u(t,e,r,n,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return r(t)}c.done?e(l):Promise.resolve(l).then(n,o)}function b(c){return function(){var t=this,a=arguments;return new Promise(function(e,r){var n=c.apply(t,a);function o(t){u(n,e,r,o,i,"next",t)}function i(t){u(n,e,r,o,i,"throw",t)}o(void 0)})}}m=jQuery,g=Garnish,axios,Craft.FlickrImporter=new t,m(document).ready(function(){Craft.FlickrImporter.init(),document.querySelectorAll(".flickr-modal-selector[data-modal-id]").forEach(function(t){function n(){p.length?i.classList.remove("disabled"):i.classList.add("disabled"),c.forEach(function(t){t.innerHTML=p.length})}var e,r=document.querySelector("#".concat(t.dataset.modalId)),a=r.dataset.photosetId,o=new g.Modal(m(r),{resizable:!0,autoShow:!1}),i=(o.hide(),null==(r=o.$container[0])?void 0:r.querySelector("[data-import-selected-btn]")),c=null==(r=o.$container[0])?void 0:r.querySelectorAll("[data-photo-count]"),l=null==(r=o.$container[0])?void 0:r.querySelector(".flickr-photos"),u=null==(r=o.$container[0])?void 0:r.querySelector(".flickr-pagination"),s=null==(r=o.$container[0])?void 0:r.querySelector('select[name="import_size"]'),f=!1,p=[],h=(e=b(T().mark(function t(){var e,n,r,o,i=arguments;return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=0<i.length&&void 0!==i[0]?i[0]:1,f)return t.abrupt("return");t.next=3;break;case 3:return t.prev=3,f=!0,l.innerHTML="Loading...",t.next=8,Craft.FlickrImporter.getAlbum(a,{page:e,perpage:60,size:"m",check_imported:!0});case 8:n=t.sent,console.log(n),r=n.photo.reduce(function(t,e){return e.isImported?t+='<div title="'.concat(e.title,'"><div class="flickr-photo-container disabled"><img class="flickr-photo-thumb" src="').concat(e.url,'" alt="').concat(e.title,'" data-photo-id="').concat(e.id,'" /></div></div>'):t+='<div class="flickr-photo-container '.concat(e.isImported?"disabled":"",'" title="').concat(e.title,'"><img class="flickr-photo-thumb" src="').concat(e.url,'" alt="').concat(e.title,'" data-photo-id="').concat(e.id,'" /></div>'),t},""),l.innerHTML=r,u&&1<n.pages&&(n.page=parseInt(n.page),n.pages=parseInt(n.pages),r=d(n.pages,n.page),o=0,u.innerHTML=r.map(function(t){var e="",r=t;return o!=t-1&&(e+="<span>...</span>"),1==t&&(r="First"),t==n.pages&&(r="Last"),e+='<button data-page="'.concat(t,'" class="btn ').concat(t==n.page?"current disabled":"",'">').concat(r,"</button>"),o=t,e}).join("")),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),console.error(t.t0);case 18:return t.prev=18,f=!1,t.finish(18);case 21:case"end":return t.stop()}},t,null,[[3,15,18,21]])})),function(){return e.apply(this,arguments)});null!=(r=o.$container[0])&&r.addEventListener("click",function(t){var e,r=t.target.closest(".flickr-photo-container"),r=(r&&(r.classList.toggle("selected"),e=r.classList.contains("selected"),r=null==(r=r.querySelector("[data-photo-id]"))?void 0:r.dataset.photoId)&&(e?p.push(r):-1<(e=p.indexOf(r))&&p.splice(e,1),console.log(p),n()),t.target.closest(".flickr-pagination button[data-page]"));r&&h(r.dataset.page)}),t.addEventListener("click",b(T().mark(function t(){return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:p=[],n(),o.show(),h();case 4:case"end":return t.stop()}},t)}))),null!=(r=m(o.$container[0]))&&r.find(".btn.cancel").click(function(){o.hide()}),null!=(t=m(o.$container[0]))&&t.find(".btn[data-import-album-btn]").click(function(t){var e={};s&&(e.import_size=s.value),Craft.FlickrImporter.importAlbum(a,function(t){var e;Craft.cp.displayNotice(null!=(e=null==t||null==(e=t.data)?void 0:e.message)?e:"Album import queued"),console.log("RES",t),o.hide()},function(t){console.error(t),Craft.cp.displayError(null!=(t=null==t||null==(t=t.data)?void 0:t.message)?t:"An error occurred")},e)}),null!=(r=m(o.$container[0]))&&r.find(".btn[data-import-selected-btn]").click(function(t){Craft.cp.displayNotice("Importing Photos"),o.hide();var e={};s&&(e.import_size=s.value),Craft.FlickrImporter.importPhotos(p,a,function(t){console.log("RES",t),Craft.cp.displayNotice(null!=(t=null==t||null==(t=t.data)?void 0:t.message)?t:"Photos have been imported!")},function(t){console.error(t),Craft.cp.displayError(null!=(t=null==t||null==(t=t.data)?void 0:t.message)?t:"An Error Occurred")},e)})});var t,e,r,n,o,a,c,i,l,u,s,f=document.querySelector("#photostream-modal-selector");function p(){u.length?n.classList.remove("disabled"):n.classList.add("disabled"),o.forEach(function(t){t.innerHTML=u.length})}f&&(f=f,(r=new g.Modal(m("#photostream-modal"),{resizable:!0,autoShow:!1})).hide(),n=null==(t=r.$container[0])?void 0:t.querySelector("[data-import-selected-btn]"),o=null==(t=r.$container[0])?void 0:t.querySelectorAll("[data-photo-count]"),a=null==(t=r.$container[0])?void 0:t.querySelector(".flickr-pagination"),c=null==(t=r.$container[0])?void 0:t.querySelector(".flickr-photos"),i=null==(t=r.$container[0])?void 0:t.querySelector('select[name="import_size"]'),l=!1,u=[],e=b(T().mark(function t(){var e,n,r,o,i=arguments;return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=0<i.length&&void 0!==i[0]?i[0]:1,l)return t.abrupt("return");t.next=3;break;case 3:return t.prev=3,l=!0,c.innerHTML="Loading...",t.next=8,Craft.FlickrImporter.getPhotos({page:e,perpage:120,size:"t",check_imported:!0});case 8:n=t.sent,console.log(n),r=n.photo.reduce(function(t,e){return e.isImported?t+='<div title="'.concat(e.title,'"><div class="flickr-photo-container disabled"><img class="flickr-photo-thumb" src="').concat(e.url,'" alt="').concat(e.title,'" data-photo-id="').concat(e.id,'" /></div></div>'):t+='<div class="flickr-photo-container" title="'.concat(e.title,'"><img class="flickr-photo-thumb" src="').concat(e.url,'" alt="').concat(e.title,'" data-photo-id="').concat(e.id,'" /></div>'),t},""),c.innerHTML=r,a&&void 0!==n.pages&&(n.page=parseInt(n.page),n.pages=parseInt(n.pages),r=d(n.pages,n.page),o=0,a.innerHTML=r.map(function(t){var e="",r=t;return o!=t-1&&(e+="<span>...</span>"),1==t&&(r="First"),t==n.pages&&(r="Last"),e+='<button data-page="'.concat(t,'" class="btn ').concat(t==n.page?"current disabled":"",'">').concat(r,"</button>"),o=t,e}).join("")),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),console.error(t.t0);case 18:return t.prev=18,l=!1,t.finish(18);case 21:case"end":return t.stop()}},t,null,[[3,15,18,21]])})),s=function(){return e.apply(this,arguments)},null!=(t=r.$container[0])&&t.addEventListener("click",function(t){var e=t.target.closest(".flickr-photo-container");if(e){e.classList.toggle("selected");var r=e.classList.contains("selected"),e=null==(e=e.querySelector("[data-photo-id]"))?void 0:e.dataset.photoId;if(!e)return;r?u.push(e):-1<(r=u.indexOf(e))&&u.splice(r,1),p()}e=t.target.closest(".flickr-pagination button[data-page]");e&&(console.log(e.dataset.page),s(e.dataset.page))}),f.addEventListener("click",function(){u=[],p(),r.show(),s()}),null!=(t=m(r.$container[0]))&&t.find(".btn.cancel").click(function(){r.hide()}),null!=(f=m(r.$container[0])))&&f.find(".btn[data-import-selected-btn]").click(function(){Craft.cp.displayNotice("Importing Photos"),r.hide();var t={};i&&(t.import_size=i.value),Craft.FlickrImporter.importPhotos(u,null,function(t){Craft.cp.displayNotice(null!=(t=null==t||null==(t=t.data)?void 0:t.message)?t:"Photos have been imported!")},function(t){Craft.cp.displayError(null!=(t=null==t||null==(t=t.data)?void 0:t.message)?t:"An Error Occurred")},t)})})})();